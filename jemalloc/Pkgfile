# Description: General-purpose scalable concurrent malloc implementation
# URL: https://jemalloc.net/
# Maintainer: Jay Lanagan, j at lngn dot net
# Depends on: clang

name=jemalloc
version=5.3.0
release=1
source=(https://github.com/jemalloc/$name/releases/download/$version/$name-$version.tar.bz2)

build() {
  cd $name-$version

export CC=clang
export CXX=clang++
./configure \
  --prefix=/usr \
  --sysconfdir=/etc \
  --localstatedir=/var \
  --enable-prof \
  --enable-autogen

make
make install DESTDIR=$PKG

rm -rf $PKG/usr/share/doc
}
